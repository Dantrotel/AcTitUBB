<div class="cronograma-container">
  <!-- Header principal -->
  <div class="header-section">
    <h1> Cronograma de Proyecto</h1>
    <p *ngIf="cronograma">{{ cronograma.nombre_cronograma || cronograma.nombre || 'Cronograma Principal' }}</p>
  </div>

  <!-- Informaci贸n del cronograma -->
  <div class="cronograma-info" *ngIf="cronograma">
    <h3>Informaci贸n del Cronograma</h3>
    <p>{{ cronograma.descripcion || 'Cronograma principal del proyecto' }}</p>
    
    <div class="cronograma-meta">
      <div class="meta-item">
        <div class="meta-label">Estado</div>
        <div class="meta-value">{{ cronograma.estado || 'Borrador' }}</div>
      </div>
      <div class="meta-item">
        <div class="meta-label">Fecha Inicio</div>
        <div class="meta-value">{{ cronograma.fecha_inicio | date:'dd/MM/yyyy' }}</div>
      </div>
      <div class="meta-item">
        <div class="meta-label">Fecha Fin</div>
        <div class="meta-value">{{ cronograma.fecha_fin_estimada || cronograma.fecha_fin | date:'dd/MM/yyyy' }}</div>
      </div>
      <div class="meta-item">
        <div class="meta-label">Creado por</div>
        <div class="meta-value">{{ cronograma.creador_nombre || 'Sistema' }}</div>
      </div>
    </div>
  </div>

  <!-- Estad铆sticas principales -->
  <div class="estadisticas-grid" *ngIf="cronograma">
    <div class="estadistica-card">
      <div class="estadistica-valor">{{ estadisticas.total_hitos || 0 }}</div>
      <div class="estadistica-label">Hitos Totales</div>
    </div>
    <div class="estadistica-card">
      <div class="estadistica-valor">{{ estadisticas.hitos_completados || 0 }}</div>
      <div class="estadistica-label">Completados</div>
    </div>
    <div class="estadistica-card">
      <div class="estadistica-valor">{{ estadisticas.hitos_pendientes || 0 }}</div>
      <div class="estadistica-label">Pendientes</div>
    </div>
    <div class="estadistica-card">
      <div class="estadistica-valor">{{ estadisticas.entregas_total || 0 }}</div>
      <div class="estadistica-label">Entregas</div>
    </div>
    <div class="estadistica-card">
      <div class="estadistica-valor">{{ estadisticas.progreso || 0 }}%</div>
      <div class="estadistica-label">Progreso</div>
    </div>
  </div>

  <!-- Secci贸n de gesti贸n de hitos -->
  <div class="gestion-section" *ngIf="cronograma?.id">
    <h2 class="section-header"> Gesti贸n de Hitos y Entregas</h2>
    <div class="section-content">
      <app-gestion-hitos
        [projectId]="projectId"
        [cronogramaId]="cronograma?.id?.toString() || ''"
        [userRole]="userRole"
        [userRut]="userRut"
        (hitosActualizados)="onHitosActualizados()">
      </app-gestion-hitos>
    </div>
  </div>
    
  <!-- Mensaje cuando no hay cronograma -->
  <div *ngIf="!cronograma?.id" class="no-cronograma-message">
    <div class="empty-state-icon"></div>
    <h3>No hay cronograma activo para este proyecto</h3>
    
    <div *ngIf="userRole === '2' || userRole === '3'" class="empty-state-content">
      <p><strong>Como profesor</strong>, necesitas crear un cronograma para organizar:</p>
      <ul>
        <li> Hitos y fechas l铆mite</li>
        <li> Entregas de documentos</li>
        <li> Evaluaciones y seguimiento</li>
        <li> Objetivos del proyecto</li>
      </ul>
      <button class="btn btn-primary btn-lg" (click)="crearCronograma()">
        <i class="fas fa-plus-circle"></i> Crear Cronograma Ahora
      </button>
      <p class="help-text">Se crear谩 un cronograma con duraci贸n de 6 meses que podr谩s personalizar despu茅s</p>
    </div>
    
    <div *ngIf="userRole === '1'" class="empty-state-content">
      <p><strong>Como estudiante</strong>, est谩s esperando que tu profesor gu铆a cree el cronograma del proyecto.</p>
      <p>Una vez creado, podr谩s ver:</p>
      <ul>
        <li> Fechas l铆mite de entregas</li>
        <li> Subir tus avances</li>
        <li> Seguimiento de tu progreso</li>
        <li> Retroalimentaci贸n del profesor</li>
      </ul>
      <div class="alert alert-info">
        <i class="fas fa-info-circle"></i>
        Contacta a tu profesor gu铆a para que configure el cronograma del proyecto
      </div>
    </div>
  </div>

  <!-- Acciones flotantes -->
  <div class="floating-actions" *ngIf="cronograma?.id && userRole === '2'">
    <button class="fab" (click)="editarCronograma()" title="Editar cronograma">
      锔
    </button>
  </div>
</div>