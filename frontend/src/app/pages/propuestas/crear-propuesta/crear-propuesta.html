<!-- Navbar con navegaci칩n -->
<nav class="navbar">
  <div class="navbar-brand">
    <i class="fas fa-graduation-cap"></i>
    <span>AcTitUBB</span>
  </div>
  
  <div class="navbar-actions">
    <button type="button" (click)="probarNotificaciones()" style="margin-right: 10px; padding: 8px 16px; background: #f59e0b; color: white; border: none; border-radius: 6px; cursor: pointer;">
      游빍 Probar Notificaciones
    </button>
    <div class="action-item" (click)="volver()" matTooltip="Volver al inicio">
      <i class="fas fa-arrow-left"></i>
      <span>Volver</span>
    </div>
  </div>
</nav>

<!-- Contenido principal -->
<div class="main-container">
  <div class="form-header">
    <div class="header-content">
      <h1><i class="fas fa-file-alt"></i> Crear Nueva Propuesta</h1>
      <p>Completa el formulario para enviar tu propuesta de proyecto de t칤tulo</p>
    </div>
    
    <div class="header-illustration">
      <i class="fas fa-rocket"></i>
    </div>
  </div>

  <!-- Formulario -->
  <div class="form-container">
    <form class="propuesta-form" (ngSubmit)="crear()">
      
      <!-- SECCI칍N: INFORMACI칍N B츼SICA -->
      <div class="form-section">
        <div class="section-header">
          <i class="fas fa-info-circle"></i>
          <h3>Informaci칩n B치sica</h3>
        </div>
        
        <div class="form-group">
          <label for="titulo">
            <i class="fas fa-heading"></i>
            T칤tulo del Proyecto *
          </label>
          <input
            id="titulo"
            type="text"
            [(ngModel)]="titulo"
            name="titulo"
            placeholder="Ingresa el t칤tulo de tu propuesta..."
            required
            class="form-input"
            maxlength="255">
        </div>

        <div class="form-group">
          <label for="descripcion">
            <i class="fas fa-align-left"></i>
            Descripci칩n General *
          </label>
          <textarea
            id="descripcion"
            [(ngModel)]="descripcion"
            name="descripcion"
            placeholder="Describe brevemente tu propuesta..."
            required
            class="form-textarea"
            rows="4"
            maxlength="1000"></textarea>
        </div>
      </div>

      <!-- SECCI칍N: CONFIGURACI칍N DEL PROYECTO -->
      <div class="form-section">
        <div class="section-header">
          <i class="fas fa-cogs"></i>
          <h3>Configuraci칩n del Proyecto</h3>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="modalidad">
              <i class="fas fa-layer-group"></i>
              Modalidad *
            </label>
            <select
              id="modalidad"
              [(ngModel)]="modalidad"
              name="modalidad"
              required
              class="form-select">
              <option value="">Selecciona modalidad</option>
              <option value="desarrollo_software">Desarrollo de Software</option>
              <option value="investigacion">Investigaci칩n</option>
              <option value="investigacion">Practica profesional para titulaci칩n</option>
            </select>
          </div>

          <div class="form-group">
            <label for="numero_estudiantes">
              <i class="fas fa-users"></i>
              N칰mero de Estudiantes *
            </label>
            <select
              id="numero_estudiantes"
              [(ngModel)]="numero_estudiantes"
              name="numero_estudiantes"
              required
              class="form-select"
              (change)="onEstudiantesChange()">
              <option value="">Selecciona cantidad</option>
              <option value="1">1 Estudiante</option>
              <option value="2">2 Estudiantes</option>
              <option value="3">3 Estudiantes</option>
            </select>
          </div>
        </div>

        <!-- Campos de Estudiantes Adicionales -->
        <div class="estudiantes-adicionales-container" *ngIf="mostrarEstudiantesAdicionales">
          <div class="form-group" *ngFor="let estudiante of estudiantes_adicionales; let i = index">
            <label [for]="'estudiante_' + (i + 2)">
              <i class="fas fa-user-plus"></i>
              RUT del Estudiante {{ i + 2 }} *
            </label>
            <input
              [id]="'estudiante_' + (i + 2)"
              type="text"
              [(ngModel)]="estudiantes_adicionales[i]"
              [name]="'estudiante_adicional_' + i"
              placeholder="Ej: 12345678-9"
              required
              class="form-input"
              maxlength="12"
              pattern="^\d{7,8}-[0-9kK]{1}$">
            <small class="form-hint">
              <i class="fas fa-info-circle"></i>
              Formato: 12345678-9 (sin puntos)
            </small>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="complejidad_estimada">
              <i class="fas fa-chart-line"></i>
              Complejidad Estimada *
            </label>
            <select
              id="complejidad_estimada"
              [(ngModel)]="complejidad_estimada"
              name="complejidad_estimada"
              required
              class="form-select"
              (change)="onComplejidadChange()">
              <option value="">Selecciona complejidad</option>
              <option value="baja">Baja</option>
              <option value="media">Media</option>
              <option value="alta">Alta</option>
            </select>
          </div>

          <div class="form-group">
            <label for="duracion_estimada_semestres">
              <i class="fas fa-calendar-alt"></i>
              Duraci칩n Estimada *
            </label>
            <select
              id="duracion_estimada_semestres"
              [(ngModel)]="duracion_estimada_semestres"
              name="duracion_estimada_semestres"
              required
              class="form-select">
              <option value="">Selecciona duraci칩n</option>
              <option value="1">1 Semestre</option>
              <option value="2">2 Semestres</option>
            </select>
          </div>
        </div>

        <div class="form-group" *ngIf="mostrarJustificacionComplejidad">
          <label for="justificacion_complejidad">
            <i class="fas fa-question-circle"></i>
            Justificaci칩n de Complejidad *
          </label>
          <textarea
            id="justificacion_complejidad"
            [(ngModel)]="justificacion_complejidad"
            name="justificacion_complejidad"
            placeholder="Justifica por qu칠 este proyecto requiere 2 estudiantes siendo de complejidad baja..."
            [required]="mostrarJustificacionComplejidad"
            class="form-textarea"
            rows="3"></textarea>
          <small class="form-hint">
            <i class="fas fa-info-circle"></i>
            Se requiere justificaci칩n para proyectos de 2 estudiantes con complejidad baja
          </small>
        </div>

        <div class="form-group">
          <label for="area_tematica">
            <i class="fas fa-tags"></i>
            츼rea Tem치tica *
          </label>
          <input
            id="area_tematica"
            type="text"
            [(ngModel)]="area_tematica"
            name="area_tematica"
            placeholder="Ej: Inteligencia Artificial, Desarrollo Web, Bases de Datos..."
            required
            class="form-input"
            maxlength="100">
        </div>
      </div>

      <!-- SECCI칍N: OBJETIVOS -->
      <div class="form-section">
        <div class="section-header">
          <i class="fas fa-bullseye"></i>
          <h3>Objetivos del Proyecto</h3>
        </div>
        
        <div class="form-group">
          <label for="objetivos_generales">
            <i class="fas fa-target"></i>
            Objetivos Generales *
          </label>
          <textarea
            id="objetivos_generales"
            [(ngModel)]="objetivos_generales"
            name="objetivos_generales"
            placeholder="Define los objetivos generales que busca alcanzar tu proyecto..."
            required
            class="form-textarea"
            rows="4"></textarea>
        </div>

        <div class="form-group">
          <label for="objetivos_especificos">
            <i class="fas fa-list-ol"></i>
            Objetivos Espec칤ficos *
          </label>
          <textarea
            id="objetivos_especificos"
            [(ngModel)]="objetivos_especificos"
            name="objetivos_especificos"
            placeholder="Lista los objetivos espec칤ficos y medibles del proyecto..."
            required
            class="form-textarea"
            rows="5"></textarea>
        </div>
      </div>

      <!-- SECCI칍N: METODOLOG칈A -->
      <div class="form-section">
        <div class="section-header">
          <i class="fas fa-project-diagram"></i>
          <h3>Metodolog칤a y Recursos</h3>
        </div>
        
        <div class="form-group">
          <label for="metodologia_propuesta">
            <i class="fas fa-route"></i>
            Metodolog칤a Propuesta *
          </label>
          <textarea
            id="metodologia_propuesta"
            [(ngModel)]="metodologia_propuesta"
            name="metodologia_propuesta"
            placeholder="Describe la metodolog칤a que utilizar치s para desarrollar el proyecto..."
            required
            class="form-textarea"
            rows="5"></textarea>
        </div>

        <div class="form-group">
          <label for="recursos_necesarios">
            <i class="fas fa-toolbox"></i>
            Recursos Necesarios
          </label>
          <textarea
            id="recursos_necesarios"
            [(ngModel)]="recursos_necesarios"
            name="recursos_necesarios"
            placeholder="Lista los recursos t칠cnicos, software, hardware o bibliogr치ficos necesarios..."
            class="form-textarea"
            rows="3"></textarea>
        </div>

        <div class="form-group">
          <label for="bibliografia">
            <i class="fas fa-book"></i>
            Bibliograf칤a
          </label>
          <textarea
            id="bibliografia"
            [(ngModel)]="bibliografia"
            name="bibliografia"
            placeholder="Referencias bibliogr치ficas relevantes para el proyecto..."
            class="form-textarea"
            rows="4"></textarea>
        </div>
      </div>

      <!-- SECCI칍N: ARCHIVO Y ENV칈O -->
      <div class="form-section">
        <div class="section-header">
          <i class="fas fa-paperclip"></i>
          <h3>Documentaci칩n</h3>
        </div>
        
        <div class="form-group">
          <label for="archivo">
            <i class="fas fa-upload"></i>
            Archivo de Propuesta *
          </label>
          <div class="file-upload-container">
            <input
              type="file"
              id="archivo"
              (change)="onFileChange($event)"
              accept=".pdf,.doc,.docx"
              name="archivo"
              required
              class="file-input"
            />
            <div class="file-upload-area" [class.has-file]="archivo">
              <div class="upload-icon">
                <i class="fas fa-cloud-upload-alt"></i>
              </div>
              <div class="upload-text">
                <span class="upload-title">
                  {{ archivo ? archivo.name : 'Selecciona un archivo' }}
                </span>
                <span class="upload-subtitle">
                  {{ archivo ? 'Archivo seleccionado' : 'PDF, DOC o DOCX (m치x. 10MB)' }}
                </span>
              </div>
              <button type="button" class="upload-btn">
                <i class="fas fa-folder-open"></i>
                Explorar
              </button>
            </div>
          </div>
          <small class="form-hint">
            <i class="fas fa-info-circle"></i>
            Adjunta el documento completo de tu propuesta de proyecto
          </small>
        </div>
      </div>

      <!-- Resumen de la propuesta -->
      <div class="form-section summary-section" *ngIf="titulo || descripcion">
        <div class="section-header">
          <i class="fas fa-eye"></i>
          <h3>Vista Previa</h3>
        </div>
        
        <div class="summary-card">
          <div class="summary-item">
            <span class="summary-label">T칤tulo:</span>
            <span class="summary-value">{{ titulo || 'No especificado' }}</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Modalidad:</span>
            <span class="summary-value">{{ modalidad || 'No especificada' }}</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Estudiantes:</span>
            <span class="summary-value">{{ numero_estudiantes || 'No especificado' }}</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Complejidad:</span>
            <span class="summary-value">{{ complejidad_estimada || 'No especificada' }}</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Duraci칩n:</span>
            <span class="summary-value">{{ duracion_estimada_semestres ? duracion_estimada_semestres + ' semestre(s)' : 'No especificada' }}</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Archivo:</span>
            <span class="summary-value">{{ archivo ? archivo.name : 'No seleccionado' }}</span>
          </div>
        </div>
      </div>

      <!-- Botones de acci칩n -->
      <div class="form-actions">
        <button 
          type="button" 
          class="btn-secondary" 
          (click)="volver()"
        >
          <i class="fas fa-arrow-left"></i>
          Cancelar
        </button>
        
        <button 
          type="submit" 
          class="btn-primary" 
          [disabled]="isSubmitting"
          [class.loading]="isSubmitting"
        >
          <i class="fas fa-paper-plane" *ngIf="!isSubmitting"></i>
          <i class="fas fa-spinner fa-spin" *ngIf="isSubmitting"></i>
          {{ isSubmitting ? 'Enviando...' : 'Crear Propuesta' }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Footer -->
<footer class="main-footer">
  <div class="footer-content">
    <p>&copy; {{fechaActual() | date:'yyyy'}} Universidad del B칤o-B칤o - Sistema de Gesti칩n de Proyectos de T칤tulo</p>
  </div>
</footer>
