<div class="detalle-propuesta" *ngIf="propuesta; else errorTpl">
  <h2>Detalle de la Propuesta</h2>

  <div class="campo">
    <label>Título:</label>
    <span>{{ propuesta.titulo }}</span>
  </div>

  <div class="campo">
    <label>Descripción:</label>
    <span>{{ propuesta.descripcion }}</span>
  </div>

  <div class="campo">
    <label>Estudiante:</label>
    <span>{{ propuesta.nombre_estudiante }}</span>
  </div>

  <div class="campo">
    <label>Profesor:</label>
    <span>
      {{ propuesta.profesor_rut || 'No asignado' }} — 
      {{ propuesta.nombre_profesor || 'No asignado' }}
    </span>
  </div>

  <div class="campo">
    <label>Estado:</label>
    <span>{{ propuesta.estado }}</span>
  </div>

  <div class="campo" *ngIf="propuesta.comentarios_profesor">
    <label>Comentarios del Profesor:</label>
    <p>{{ propuesta.comentarios_profesor }}</p>
  </div>

  <div class="campo" *ngIf="propuesta.fecha_envio">
    <label>Fecha de Envío:</label>
    <span>{{ propuesta.fecha_envio | date: 'medium' }}</span>
  </div>

  <div class="campo" *ngIf="propuesta.fecha_revision">
    <label>Fecha de Revisión:</label>
    <span>{{ propuesta.fecha_revision | date: 'medium' }}</span>
  </div>

  <div class="campo" *ngIf="propuesta.asignado_por">
    <label>Asignado Por:</label>
    <span>{{ propuesta.asignado_por }}</span>
  </div>

  <div class="campo">
    <label>Archivo Adjunto:</label>
    <button (click)="descargarArchivo(propuesta.archivo)" class="btn-secundario">
      Descargar archivo
    </button>
  </div>

  <div class="acciones" *ngIf="esProfesor && !propuesta.profesor_rut">
    <button (click)="asignarme()" class="btn-asignar">
      Asignarme esta propuesta
    </button>
  </div>

  <div class="acciones">
    <button (click)="volver()" class="btn-volver">← Volver</button>
  </div>
</div>

<ng-template #errorTpl>
  <div class="error">
    <p *ngIf="error">{{ error }}</p>
    <p *ngIf="!error">Cargando propuesta...</p>
  </div>
</ng-template>
